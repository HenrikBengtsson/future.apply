<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Apply a Function over a List or Vector via Futures — future_eapply • future.apply</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Apply a Function over a List or Vector via Futures — future_eapply" />
<meta property="og:description" content="future_lapply() implements base::lapply() using futures with perfect
replication of results, regardless of future backend used.
Analogously, this is true for all the other future_nnn() functions." />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SB3EQSD9FR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SB3EQSD9FR');
</script>


<!-- dependencies from examples -->


  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">future.apply</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.7.0-9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/future.apply-1-overview.html">A Future for R: Apply Function to Elements in Parallel</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/HenrikBengtsson/future.apply/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Apply a Function over a List or Vector via Futures</h1>
    <small class="dont-index">Source: <a href='https://github.com/HenrikBengtsson/future.apply/blob/master/R/future_eapply.R'><code>R/future_eapply.R</code></a>, <a href='https://github.com/HenrikBengtsson/future.apply/blob/master/R/future_lapply.R'><code>R/future_lapply.R</code></a>, <a href='https://github.com/HenrikBengtsson/future.apply/blob/master/R/future_replicate.R'><code>R/future_replicate.R</code></a>, and 3 more</small>
    <div class="hidden name"><code>future_lapply.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code><a href='future_lapply.html'>future_lapply()</a></code> implements <code><a href='https://rdrr.io/r/base/lapply.html'>base::lapply()</a></code> using futures with perfect
replication of results, regardless of future backend used.
Analogously, this is true for all the other <code>future_nnn()</code> functions.</p>
    </div>

    <pre class="usage"><span class='fu'><a href='future_lapply.html'>future_eapply</a></span><span class='op'>(</span>
  <span class='va'>env</span>,
  <span class='va'>FUN</span>,
  <span class='va'>...</span>,
  all.names <span class='op'>=</span> <span class='cn'>FALSE</span>,
  USE.NAMES <span class='op'>=</span> <span class='cn'>TRUE</span>,
  future.label <span class='op'>=</span> <span class='st'>"future_eapply-%d"</span>
<span class='op'>)</span>

<span class='fu'><a href='future_lapply.html'>future_lapply</a></span><span class='op'>(</span>
  <span class='va'>X</span>,
  <span class='va'>FUN</span>,
  <span class='va'>...</span>,
  future.stdout <span class='op'>=</span> <span class='cn'>TRUE</span>,
  future.conditions <span class='op'>=</span> <span class='st'>"condition"</span>,
  future.globals <span class='op'>=</span> <span class='cn'>TRUE</span>,
  future.packages <span class='op'>=</span> <span class='cn'>NULL</span>,
  future.lazy <span class='op'>=</span> <span class='cn'>FALSE</span>,
  future.seed <span class='op'>=</span> <span class='cn'>FALSE</span>,
  future.scheduling <span class='op'>=</span> <span class='fl'>1</span>,
  future.chunk.size <span class='op'>=</span> <span class='cn'>NULL</span>,
  future.label <span class='op'>=</span> <span class='st'>"future_lapply-%d"</span>
<span class='op'>)</span>

<span class='fu'><a href='future_lapply.html'>future_replicate</a></span><span class='op'>(</span>
  <span class='va'>n</span>,
  <span class='va'>expr</span>,
  simplify <span class='op'>=</span> <span class='st'>"array"</span>,
  future.seed <span class='op'>=</span> <span class='cn'>TRUE</span>,
  <span class='va'>...</span>,
  future.label <span class='op'>=</span> <span class='st'>"future_replicate-%d"</span>
<span class='op'>)</span>

<span class='fu'><a href='future_lapply.html'>future_sapply</a></span><span class='op'>(</span>
  <span class='va'>X</span>,
  <span class='va'>FUN</span>,
  <span class='va'>...</span>,
  simplify <span class='op'>=</span> <span class='cn'>TRUE</span>,
  USE.NAMES <span class='op'>=</span> <span class='cn'>TRUE</span>,
  future.label <span class='op'>=</span> <span class='st'>"future_sapply-%d"</span>
<span class='op'>)</span>

<span class='fu'><a href='future_lapply.html'>future_tapply</a></span><span class='op'>(</span>
  <span class='va'>X</span>,
  <span class='va'>INDEX</span>,
  FUN <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>...</span>,
  default <span class='op'>=</span> <span class='cn'>NA</span>,
  simplify <span class='op'>=</span> <span class='cn'>TRUE</span>,
  future.label <span class='op'>=</span> <span class='st'>"future_tapply-%d"</span>
<span class='op'>)</span>

<span class='fu'><a href='future_lapply.html'>future_vapply</a></span><span class='op'>(</span>
  <span class='va'>X</span>,
  <span class='va'>FUN</span>,
  <span class='va'>FUN.VALUE</span>,
  <span class='va'>...</span>,
  USE.NAMES <span class='op'>=</span> <span class='cn'>TRUE</span>,
  future.label <span class='op'>=</span> <span class='st'>"future_vapply-%d"</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>env</th>
      <td><p>An <span style="R">R</span> environment.</p></td>
    </tr>
    <tr>
      <th>FUN</th>
      <td><p>A function taking at least one argument.</p></td>
    </tr>
    <tr>
      <th>all.names</th>
      <td><p>If <code>TRUE</code>, the function will also be applied to variables
that start with a period (<code>.</code>), otherwise not.
See <code><a href='https://rdrr.io/r/base/eapply.html'>base::eapply()</a></code> for details.</p></td>
    </tr>
    <tr>
      <th>USE.NAMES</th>
      <td><p>See <code><a href='https://rdrr.io/r/base/lapply.html'>base::sapply()</a></code>.</p></td>
    </tr>
    <tr>
      <th>future.label</th>
      <td><p>If a character string, then each future is assigned
a label <code><a href='https://rdrr.io/r/base/sprintf.html'>sprintf(future.label, chunk_idx)</a></code>.  If TRUE, then the
same as <code>future.label = "future_lapply-%d"</code>.  If FALSE, no labels
are assigned.</p></td>
    </tr>
    <tr>
      <th>X</th>
      <td><p>A vector-like object to iterate over.</p></td>
    </tr>
    <tr>
      <th>future.stdout</th>
      <td><p>If <code>TRUE</code> (default), then the standard output of the
underlying futures is captured, and re-outputted as soon as possible.
If <code>FALSE</code>, any output is silenced (by sinking it to the null device
as it is outputted).
If <code>NA</code> (not recommended), output is <em>not</em> intercepted.</p></td>
    </tr>
    <tr>
      <th>future.conditions</th>
      <td><p>A character string of conditions classes to be
captured and relayed.  The default is the same as the <code>condition</code>
argument of <code><a href='https://rdrr.io/pkg/future/man/Future-class.html'>future::Future()</a></code>.
To not intercept conditions, use <code>conditions = character(0L)</code>.
Errors are always relayed.</p></td>
    </tr>
    <tr>
      <th>future.globals</th>
      <td><p>A logical, a character vector, or a named list for
controlling how globals are handled. For details, see below section.</p></td>
    </tr>
    <tr>
      <th>future.packages</th>
      <td><p>(optional) a character vector specifying packages
to be attached in the R environment evaluating the future.</p></td>
    </tr>
    <tr>
      <th>future.lazy</th>
      <td><p>Specifies whether the futures should be resolved
lazily or eagerly (default).</p></td>
    </tr>
    <tr>
      <th>future.seed</th>
      <td><p>A logical or an integer (of length one or seven),
or a list of <code><a href='https://rdrr.io/r/base/length.html'>length(X)</a></code> with pre-generated random seeds.
For details, see below section.</p></td>
    </tr>
    <tr>
      <th>future.scheduling</th>
      <td><p>Average number of futures ("chunks") per worker.
If <code>0.0</code>, then a single future is used to process all elements
of <code>X</code>.
If <code>1.0</code> or <code>TRUE</code>, then one future per worker is used.
If <code>2.0</code>, then each worker will process two futures
(if there are enough elements in <code>X</code>).
If <code>Inf</code> or <code>FALSE</code>, then one future per element of
<code>X</code> is used.
Only used if <code>future.chunk.size</code> is <code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>future.chunk.size</th>
      <td><p>The average number of elements per future ("chunk").
If <code>Inf</code>, then all elements are processed in a single future.
If <code>NULL</code>, then argument <code>future.scheduling</code> is used.</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p>The number of replicates.</p></td>
    </tr>
    <tr>
      <th>expr</th>
      <td><p>An <span style="R">R</span> expression to evaluate repeatedly.</p></td>
    </tr>
    <tr>
      <th>simplify</th>
      <td><p>See <code><a href='https://rdrr.io/r/base/lapply.html'>base::sapply()</a></code> and <code><a href='https://rdrr.io/r/base/tapply.html'>base::tapply()</a></code>, respectively.</p></td>
    </tr>
    <tr>
      <th>INDEX</th>
      <td><p>A list of one or more factors, each of same length as <code>X</code>.
The elements are coerced to factors by <code><a href='https://rdrr.io/r/base/factor.html'>as.factor()</a></code>.
See also <code><a href='https://rdrr.io/r/base/tapply.html'>base::tapply()</a></code>.</p></td>
    </tr>
    <tr>
      <th>default</th>
      <td><p>See <code><a href='https://rdrr.io/r/base/tapply.html'>base::tapply()</a></code>.</p></td>
    </tr>
    <tr>
      <th>FUN.VALUE</th>
      <td><p>A template for the required return value from
each <code>FUN(X[ii], ...)</code>.
Types may be promoted to a higher type within the ordering
logical &lt; integer &lt; double &lt; complex, but not demoted.
See <code><a href='https://rdrr.io/r/base/lapply.html'>base::vapply()</a></code> for details.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>(optional) Additional arguments passed to <code>FUN()</code>.
For <code>future_*apply()</code> functions and <code><a href='https://rdrr.io/r/base/lapply.html'>replicate()</a></code>, any <code>future.*</code> arguments
part of <code>\ldots</code> are passed on to <code><a href='future_lapply.html'>future_lapply()</a></code> used internally.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A named (unless <code>USE.NAMES = FALSE</code>) list.
See <code><a href='https://rdrr.io/r/base/eapply.html'>base::eapply()</a></code> for details.</p>
<p>For <code><a href='future_lapply.html'>future_lapply()</a></code>, a list with same length and names as <code>X</code>.
See <code><a href='https://rdrr.io/r/base/lapply.html'>base::lapply()</a></code> for details.</p>
<p><code><a href='future_lapply.html'>future_replicate()</a></code> is a wrapper around <code><a href='future_lapply.html'>future_sapply()</a></code> and return
simplified object according to the <code>simplify</code> argument.
See <code><a href='https://rdrr.io/r/base/lapply.html'>base::replicate()</a></code> for details.
Since <code><a href='future_lapply.html'>future_replicate()</a></code> usually involves random number generation (RNG),
it uses <code>future.seed = TRUE</code> by default in order produce sound random
numbers regardless of future backend and number of background workers used.</p>
<p>For <code><a href='future_lapply.html'>future_sapply()</a></code>, a vector with same length and names as <code>X</code>.
See <code><a href='https://rdrr.io/r/base/lapply.html'>base::sapply()</a></code> for details.</p>
<p><code><a href='future_lapply.html'>future_tapply()</a></code> returns an array with mode <code>"list"</code>, unless
<code>simplify = TRUE</code> (default) <em>and</em> <code>FUN</code> returns a scalar, in which
case the mode of the array is the same as the returned scalars.
See <code><a href='https://rdrr.io/r/base/tapply.html'>base::tapply()</a></code> for details.</p>
<p>For <code><a href='future_lapply.html'>future_vapply()</a></code>, a vector with same length and names as <code>X</code>.
See <code><a href='https://rdrr.io/r/base/lapply.html'>base::vapply()</a></code> for details.</p>
    <h2 class="hasAnchor" id="global-variables"><a class="anchor" href="#global-variables"></a>Global variables</h2>

    

<p>Argument <code>future.globals</code> may be used to control how globals
should be handled similarly how the <code>globals</code> argument is used with
<code>future()</code>.
Since all function calls use the same set of globals, this function can do
any gathering of globals upfront (once), which is more efficient than if
it would be done for each future independently.
If <code>TRUE</code>, <code>NULL</code> or not is specified (default), then globals
are automatically identified and gathered.
If a character vector of names is specified, then those globals are gathered.
If a named list, then those globals are used as is.
In all cases, <code>FUN</code> and any <code>\ldots</code> arguments are automatically
passed as globals to each future created as they are always needed.</p>
    <h2 class="hasAnchor" id="reproducible-random-number-generation-rng-"><a class="anchor" href="#reproducible-random-number-generation-rng-"></a>Reproducible random number generation (RNG)</h2>

    

<p>Unless <code>future.seed = FALSE</code>, this function guarantees to generate
the exact same sequence of random numbers <em>given the same initial
seed / RNG state</em> - this regardless of type of futures, scheduling
("chunking") strategy, and number of workers.</p>
<p>RNG reproducibility is achieved by pregenerating the random seeds for all
iterations (over <code>X</code>) by using L'Ecuyer-CMRG RNG streams.  In each
iteration, these seeds are set before calling <code>FUN(X[[ii]], ...)</code>.
<em>Note, for large <code><a href='https://rdrr.io/r/base/length.html'>length(X)</a></code> this may introduce a large overhead.</em>
As input (<code>future.seed</code>), a fixed seed (integer) may be given, either
as a full L'Ecuyer-CMRG RNG seed (vector of 1+6 integers) or as a seed
generating such a full L'Ecuyer-CMRG seed.
If <code>future.seed = TRUE</code>, then <code><a href='https://rdrr.io/r/base/Random.html'>.Random.seed</a></code>
is returned if it holds a L'Ecuyer-CMRG RNG seed, otherwise one is created
randomly.
If <code>future.seed = NA</code>, a L'Ecuyer-CMRG RNG seed is randomly created.
If none of the function calls <code>FUN(X[[ii]], ...)</code> uses random number
generation, then <code>future.seed = FALSE</code> may be used.</p>
<p>In addition to the above, it is possible to specify a pre-generated
sequence of RNG seeds as a list such that
<code>length(future.seed) == length(X)</code> and where each element is an
integer seed vector that can be assigned to
<code><a href='https://rdrr.io/r/base/Random.html'>.Random.seed</a></code>.  One approach to generate a
set of valid RNG seeds based on fixed initial seed (here <code>42L</code>) is:<div class="r"></p><pre><span class='va'>seeds</span> <span class='op'>&lt;-</span> <span class='fu'><a href='future_lapply.html'>future_lapply</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq_along</a></span><span class='op'>(</span><span class='va'>X</span><span class='op'>)</span>, FUN <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='va'>.Random.seed</span>,
                       future.chunk.size <span class='op'>=</span> <span class='cn'>Inf</span>, future.seed <span class='op'>=</span> <span class='fl'>42L</span><span class='op'>)</span>
</pre><p></div></p>
<p><strong>Note that <code><a href='https://rdrr.io/r/base/list.html'>as.list(seq_along(X))</a></code> is <em>not</em> a valid set of such
<code>.Random.seed</code> values.</strong></p>
<p>In all cases but <code>future.seed = FALSE</code>, the RNG state of the calling
R processes after this function returns is guaranteed to be
"forwarded one step" from the RNG state that was before the call and
in the same way regardless of <code>future.seed</code>, <code>future.scheduling</code>
and future strategy used.  This is done in order to guarantee that an <span style="R">R</span>
script calling <code><a href='future_lapply.html'>future_lapply()</a></code> multiple times should be numerically
reproducible given the same initial seed.</p>
    <h2 class="hasAnchor" id="control-processing-order-of-elements"><a class="anchor" href="#control-processing-order-of-elements"></a>Control processing order of elements</h2>

    

<p>Attribute <code>ordering</code> of <code>future.chunk.size</code> or <code>future.scheduling</code> can
be used to control the ordering the elements are iterated over, which
only affects the processing order and <em>not</em> the order values are returned.
This attribute can take the following values:</p><ul>
<li><p>index vector - an numeric vector of length <code><a href='https://rdrr.io/r/base/length.html'>length(X)</a></code></p></li>
<li><p>function     - an function taking one argument which is called as
<code>ordering(length(X))</code> and which much return an
index vector of length <code><a href='https://rdrr.io/r/base/length.html'>length(X)</a></code>, e.g.
<code>function(n) rev(seq_len(n))</code> for reverse ordering.</p></li>
<li><p><code>"random"</code>   - this will randomize the ordering via random index
vector <code><a href='https://rdrr.io/r/base/sample.html'>sample.int(length(X))</a></code>.
For example, <code>future.scheduling = structure(TRUE, ordering = "random")</code>.
<em>Note</em>, when elements are processed out of order, then captured standard
output and conditions are also relayed in that order, that is out of order.</p></li>
</ul>

    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>The implementations of <code><a href='future_lapply.html'>future_replicate()</a></code>, <code><a href='future_lapply.html'>future_sapply()</a></code>, and
<code><a href='future_lapply.html'>future_tapply()</a></code> are adopted from the source code of the corresponding
base <span style="R">R</span> functions, which are licensed under GPL (&gt;= 2) with
'The R Core Team' as the copyright holder.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## ---------------------------------------------------------</span>
<span class='co'>## lapply(), sapply(), tapply()</span>
<span class='co'>## ---------------------------------------------------------</span>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>a <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span>, beta <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>exp</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>3</span><span class='op'>:</span><span class='fl'>3</span><span class='op'>)</span>, logic <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>TRUE</span>, <span class='cn'>FALSE</span>, <span class='cn'>FALSE</span>, <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>y0</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='va'>x</span>, FUN <span class='op'>=</span> <span class='va'>quantile</span>, probs <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span><span class='op'>/</span><span class='fl'>4</span><span class='op'>)</span>
<span class='va'>y1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='future_lapply.html'>future_lapply</a></span><span class='op'>(</span><span class='va'>x</span>, FUN <span class='op'>=</span> <span class='va'>quantile</span>, probs <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span><span class='op'>/</span><span class='fl'>4</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>y1</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $a
#&gt;  25%  50%  75% 
#&gt; 3.25 5.50 7.75 
#&gt; 
#&gt; $beta
#&gt;       25%       50%       75% 
#&gt; 0.2516074 1.0000000 5.0536690 
#&gt; 
#&gt; $logic
#&gt; 25% 50% 75% 
#&gt; 0.0 0.5 1.0 
#&gt; </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/all.equal.html'>all.equal</a></span><span class='op'>(</span><span class='va'>y1</span>, <span class='va'>y0</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>y0</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='va'>x</span>, FUN <span class='op'>=</span> <span class='va'>quantile</span><span class='op'>)</span>
<span class='va'>y1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='future_lapply.html'>future_sapply</a></span><span class='op'>(</span><span class='va'>x</span>, FUN <span class='op'>=</span> <span class='va'>quantile</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>y1</span><span class='op'>)</span>
</div><div class='output co'>#&gt;          a        beta logic
#&gt; 0%    1.00  0.04978707   0.0
#&gt; 25%   3.25  0.25160736   0.0
#&gt; 50%   5.50  1.00000000   0.5
#&gt; 75%   7.75  5.05366896   1.0
#&gt; 100% 10.00 20.08553692   1.0</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/all.equal.html'>all.equal</a></span><span class='op'>(</span><span class='va'>y1</span>, <span class='va'>y0</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>y0</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>vapply</a></span><span class='op'>(</span><span class='va'>x</span>, FUN <span class='op'>=</span> <span class='va'>quantile</span>, FUN.VALUE <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/double.html'>double</a></span><span class='op'>(</span><span class='fl'>5L</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>y1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='future_lapply.html'>future_vapply</a></span><span class='op'>(</span><span class='va'>x</span>, FUN <span class='op'>=</span> <span class='va'>quantile</span>, FUN.VALUE <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/double.html'>double</a></span><span class='op'>(</span><span class='fl'>5L</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>y1</span><span class='op'>)</span>
</div><div class='output co'>#&gt;          a        beta logic
#&gt; 0%    1.00  0.04978707   0.0
#&gt; 25%   3.25  0.25160736   0.0
#&gt; 50%   5.50  1.00000000   0.5
#&gt; 75%   7.75  5.05366896   1.0
#&gt; 100% 10.00 20.08553692   1.0</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/all.equal.html'>all.equal</a></span><span class='op'>(</span><span class='va'>y1</span>, <span class='va'>y0</span><span class='op'>)</span><span class='op'>)</span>


<span class='co'>## ---------------------------------------------------------</span>
<span class='co'>## Parallel Random Number Generation</span>
<span class='co'>## ---------------------------------------------------------</span>
<span class='co'># \donttest{</span>
<span class='co'>## Regardless of the future plan, the number of workers, and</span>
<span class='co'>## where they are, the random numbers produced are identical</span>

<span class='fu'>plan</span><span class='op'>(</span><span class='va'>multisession</span><span class='op'>)</span>
<span class='va'>y1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='future_lapply.html'>future_lapply</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span>, FUN <span class='op'>=</span> <span class='va'>rnorm</span>, future.seed <span class='op'>=</span> <span class='fl'>0xBEEF</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>y1</span><span class='op'>)</span>
</div><div class='output co'>#&gt; List of 5
#&gt;  $ : num 0.682
#&gt;  $ : num [1:2] 1.19 -0.474
#&gt;  $ : num [1:3] -1.081 -2.412 -0.466
#&gt;  $ : num [1:4] 1.143 -1.278 0.438 0.819
#&gt;  $ : num [1:5] -1.2935 -0.0878 -0.3909 0.5652 0.2253</div><div class='input'>
<span class='fu'>plan</span><span class='op'>(</span><span class='va'>sequential</span><span class='op'>)</span>
<span class='va'>y2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='future_lapply.html'>future_lapply</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span>, FUN <span class='op'>=</span> <span class='va'>rnorm</span>, future.seed <span class='op'>=</span> <span class='fl'>0xBEEF</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>y2</span><span class='op'>)</span>
</div><div class='output co'>#&gt; List of 5
#&gt;  $ : num 0.682
#&gt;  $ : num [1:2] 1.19 -0.474
#&gt;  $ : num [1:3] -1.081 -2.412 -0.466
#&gt;  $ : num [1:4] 1.143 -1.278 0.438 0.819
#&gt;  $ : num [1:5] -1.2935 -0.0878 -0.3909 0.5652 0.2253</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/all.equal.html'>all.equal</a></span><span class='op'>(</span><span class='va'>y1</span>, <span class='va'>y2</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'># }</span>


<span class='co'>## ---------------------------------------------------------</span>
<span class='co'>## Process chunks of data.frame rows in parallel</span>
<span class='co'>## ---------------------------------------------------------</span>
<span class='va'>iris</span> <span class='op'>&lt;-</span> <span class='fu'>datasets</span><span class='fu'>::</span><span class='va'><a href='https://rdrr.io/r/datasets/iris.html'>iris</a></span>
<span class='va'>chunks</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/split.html'>split</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>iris</span><span class='op'>)</span>, length.out <span class='op'>=</span> <span class='fl'>3L</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>y0</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='va'>chunks</span>, FUN <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>iris</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>iris</span><span class='op'>$</span><span class='va'>Sepal.Length</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>y0</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/do.call.html'>do.call</a></span><span class='op'>(</span><span class='va'>sum</span>, <span class='va'>y0</span><span class='op'>)</span>
<span class='va'>y1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='future_lapply.html'>future_lapply</a></span><span class='op'>(</span><span class='va'>chunks</span>, FUN <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>iris</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>iris</span><span class='op'>$</span><span class='va'>Sepal.Length</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>y1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/do.call.html'>do.call</a></span><span class='op'>(</span><span class='va'>sum</span>, <span class='va'>y1</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>y1</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 876.5</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/all.equal.html'>all.equal</a></span><span class='op'>(</span><span class='va'>y1</span>, <span class='va'>y0</span><span class='op'>)</span><span class='op'>)</span>


<span class='co'># \dontshow{</span>
<span class='co'>## R CMD check: make sure any open connections are closed afterward</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/class.html'>inherits</a></span><span class='op'>(</span><span class='fu'>plan</span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>"sequential"</span><span class='op'>)</span><span class='op'>)</span> <span class='fu'>plan</span><span class='op'>(</span><span class='va'>sequential</span><span class='op'>)</span>
<span class='co'># }</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by Henrik Bengtsson.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p> and <a href="https://github.com/HenrikBengtsson/pkgdown.extras/">pkgdown.extras</a> 0.0.0.9000.</p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


